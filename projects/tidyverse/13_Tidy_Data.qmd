---
title: "Tidy Data"
subtitle: "David Koppstein"
format: 
  revealjs:
    slide-number: true
    chalkboard: 
      buttons: false
    preview-links: auto
    logo: images/maxplanck-ie.jpg
    css: styles.css
    theme: night
---

## What is Tidy Data? 

- In tidy data, each row is an observation and each column is a different variable. 
- In wide data, each row contains several observations, and the columns contain values. 

::: footer 
<https://maxplanck-ie.github.io/Rintro>
:::

## Example of a tidy data frame

```{r}
#| echo: true
library(tidyverse)
library(dslabs)
data(gapminder)
tidy_data <- gapminder %>% 
  filter(country %in% c("South Korea", "Germany")) %>%
  select(country, year, fertility)
head(tidy_data)
```

## Plotting tidy data is simple with `ggplot2`

```{r}
#| echo: true
tidy_data %>% 
  ggplot(aes(year, fertility, color = country)) +
  geom_point()
```

## Example of wide data

```{r}
#| echo: true
# import and inspect example of original Gapminder data in wide format
path <- system.file("extdata", package="dslabs")
filename <- file.path(path,  "fertility-two-countries-example.csv")
wide_data <- read_csv(filename)
wide_data %>% select(country, `1960`:`1967`)
```

## Converting wide to tidy data {auto-animate="true"}

- The `pivot_longer()` function converts wide data into tidy data.
- The second argument specifies the columns containing values to be moved into a single column.
- By default, the new column of values is called `value` and the column containing the original names is called `name`.

## `pivot_longer()` in action {auto-animate="true"}

```{r}
#| echo: true
wide_data %>% pivot_longer(`1960`:`2015`)
```

## `pivot_longer()` in action {auto-animate="true"}

```{r}
#| echo: true
# another way to do this - only country isn't being pivoted
wide_data %>% pivot_longer(-country)
```

## `pivot_longer()` in action {auto-animate="true"}

```{r}
#| echo: true
# another way to do this - only country isn't being pivoted
wide_data %>% pivot_longer(-country)
```

## `pivot_longer()` in action {auto-animate="true"}

```{r}
#| echo: true
new_tidy_data <- wide_data %>% 
  pivot_longer(-country, names_to = "year", values_to = "fertility")
head(new_tidy_data)
```

## Thank you! 

- The Koppstein lab will be starting in DÃ¼sseldorf in a few months
- There is a position for a Ph.D student interested in cancer, structural variation, and transcriptomics using long reads
- E-mail [David.Koppstein@gmail.com](David.Koppstein@gmail.com) if you or anyone else are interested

